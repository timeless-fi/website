(self.webpackChunktimeless_frontend=self.webpackChunktimeless_frontend||[]).push([[4843],{14843:(Rt,St,L)=>{"use strict";L.r(St),L.d(St,{default:()=>mn});var xt={};L.r(xt),L.d(xt,{decrypt:()=>dn,encrypt:()=>ln,generateKey:()=>fr,verifyHmac:()=>ur});var E=L(34553),y=L(39704);const C=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],d=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"];var Q=L(87760),Tt=L.n(Q),Pt=(L(16658),L(15343)),Dt=L.n(Pt);const T="0";function N(i){return new Uint8Array(i)}function k(i,r=!1){const o=i.toString("hex");return r?At(o):o}function c(i){return Dt()(i)}function t(i,r=!1){return k(c(i),r)}function n(i){return function(i){return i.toString("utf8")}(c(i))}function l(i){return N(function(i){return Buffer.from(q(i),"hex")}(i))}function f(i){return Buffer.from(i,"utf8")}function b(i){return N(f(i))}function $(...i){let r=[];return i.forEach(o=>r=r.concat(Array.from(o))),new Uint8Array([...r])}function G(i,r=8,o=T){return function(i,r,o=T){return function(i,r,o,m=T){const g=r-i.length;let w=i;if(g>0){const O=m.repeat(g);w=o?O+i:i+O}return w}(i,r,!0,o)}(i,function(i,r=8){const o=i%r;return o?(i-o)/r*r+r:i}(i.length,r),o)}function q(i){return i.replace(/^0x/,"")}function At(i){return i.startsWith("0x")?i:`0x${i}`}function J(i){return(i=G(i=q(i),2))&&(i=At(i)),i}function F(i){return c(new Uint8Array(i))}function nt(i){return N(i).buffer}function Gt(i,r){const o=q(J(new(Tt())(i).toString(16)));return r?o:At(o)}var $t=L(37109);function Nt(i){return J(i)}const zt=L(22339).payloadId;function qt(){return((r,o)=>{for(o=r="";r++<36;o+=51*r&52?(15^r?8^Math.random()*(20^r?16:4):4).toString(16):"-");return o})()}function Ye(i,r){return function(i,r){return!("string"!=typeof i||!i.match(/^0x[0-9A-Fa-f]*$/)||r&&i.length!==2+2*r)}(i,r)}function Xt(i){return void 0!==i.result}function ye(i){return void 0!==i.error}function Xe(i){return void 0!==i.event}function tr(i){return!function(i){return!(i&&i.length)}(i)&&!Ye(i[0])&&(i[0]=function(i,r){return function(i,r=!1){return k(f(i),r)}(i,!r)}(i[0])),i}function Ee(i){if(void 0!==i.type&&"0"!==i.type)return i;if(void 0===i.from||!(i=>!(!i||"0x"!==i.toLowerCase().substring(0,2)||!/^(0x)?[0-9a-f]{40}$/i.test(i)||!/^(0x)?[0-9a-f]{40}$/.test(i)&&!/^(0x)?[0-9A-F]{40}$/.test(i)&&i!==function(i){i=q(i.toLowerCase());const r=q((0,$t.keccak_256)(function(i){return f(i)}(i)));let o="";for(let m=0;m<i.length;m++)parseInt(r[m],16)>7?o+=i[m].toUpperCase():o+=i[m];return At(o)}(i)))(i.from))throw new Error("Transaction object must include a valid 'from' value.");function r(g){let w=g;return("number"==typeof g||"string"==typeof g&&!function(i){return""===i||"string"==typeof i&&""===i.trim()}(g))&&(Ye(g)?"string"==typeof g&&(w=Nt(g)):w=Gt(g)),"string"==typeof w&&(w=function(i){return function(i){const r=i.startsWith("0x");return i=(i=q(i)).startsWith(T)?i.substring(1):i,r?At(i):i}(At(i))}(w)),w}const o={from:Nt(i.from),to:void 0===i.to?void 0:Nt(i.to),gasPrice:void 0===i.gasPrice?"":r(i.gasPrice),gas:void 0===i.gas?void 0===i.gasLimit?"":r(i.gasLimit):r(i.gas),value:void 0===i.value?"":r(i.value),nonce:void 0===i.nonce?"":r(i.nonce),data:void 0===i.data?"":Nt(i.data)||"0x"},m=["gasPrice","gas","value","nonce"];return Object.keys(o).forEach(g=>{(void 0===o[g]||"string"==typeof o[g]&&!o[g].trim().length)&&m.includes(g)&&delete o[g]}),o}var er=L(45703);function rr(i){return er.parse(i)}const Rr=void 0!==global.WebSocket?global.WebSocket:L(80748),Ae="Session currently connected",Ct="Session currently disconnected",nr="JSON RPC response format is invalid",ir="User close QRCode Modal",sr="abcdefghijklmnopqrstuvwxyz0123456789".split("").map(i=>`https://${i}.bridge.walletconnect.org`);var te=L(38572);function Vr(i){return te.getBrowerCrypto().getRandomValues(new Uint8Array(i))}const Bt="AES-CBC",Ne="HMAC";function nn(i){return i===Bt?{length:256,name:Bt}:{hash:{name:"SHA-256"},name:Ne}}function sn(i){return i===Bt?["encrypt","decrypt"]:["sign","verify"]}function _e(i){return qe.apply(this,arguments)}function qe(){return(qe=(0,E.Z)(function*(i,r=Bt){return te.getSubtleCrypto().importKey("raw",i,nn(r),!0,sn(r))})).apply(this,arguments)}function Ce(){return(Ce=(0,E.Z)(function*(i,r,o){const m=te.getSubtleCrypto(),g=yield _e(r,Bt),w=yield m.encrypt({iv:i,name:Bt},g,o);return new Uint8Array(w)})).apply(this,arguments)}function Le(){return(Le=(0,E.Z)(function*(i,r,o){const m=te.getSubtleCrypto(),g=yield _e(r,Bt),w=yield m.decrypt({iv:i,name:Bt},g,o);return new Uint8Array(w)})).apply(this,arguments)}function hn(i,r){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,E.Z)(function*(i,r){const o=te.getSubtleCrypto(),m=yield _e(i,Ne),g=yield o.sign({length:256,name:Ne},m,r);return new Uint8Array(g)})).apply(this,arguments)}function fn(i,r,o){return function(i,r,o){return Ce.apply(this,arguments)}(i,r,o)}function un(i,r,o){return function(i,r,o){return Le.apply(this,arguments)}(i,r,o)}function hr(i,r){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,E.Z)(function*(i,r){return yield hn(i,r)})).apply(this,arguments)}function fr(i){return Je.apply(this,arguments)}function Je(){return(Je=(0,E.Z)(function*(i){return nt(c(Vr((i||256)/8)))})).apply(this,arguments)}function ur(i,r){return ze.apply(this,arguments)}function ze(){return(ze=(0,E.Z)(function*(i,r){const o=l(i.data),m=l(i.iv),w=t(l(i.hmac),!1),O=$(o,m),bt=t(yield hr(r,O),!1);return q(w)===q(bt)})).apply(this,arguments)}function ln(i,r,o){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,E.Z)(function*(i,r,o){const m=N(F(r)),w=N(F(o||(yield fr(128)))),O=t(w,!1),bt=b(JSON.stringify(i)),Lt=yield fn(w,m,bt),cr=t(Lt,!1),ee=$(Lt,w);return{data:cr,hmac:t(yield hr(m,ee),!1),iv:O}})).apply(this,arguments)}function dn(i,r){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,E.Z)(function*(i,r){const o=N(F(r));if(!o)throw new Error("Missing key: required for decryption");if(!(yield ur(i,o)))return null;const g=l(i.data),w=l(i.iv),wt=n(yield un(w,o,g));let bt;try{bt=JSON.parse(wt)}catch{return null}return bt})).apply(this,arguments)}const mn=class extends class{constructor(r){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new class{constructor(){this._eventEmitters=[]}subscribe(r){this._eventEmitters.push(r)}unsubscribe(r){this._eventEmitters=this._eventEmitters.filter(o=>o.event!==r)}trigger(r){let m,o=[];var i;m=void 0!==r.method?r.method:Xt(r)||ye(r)?`response:${r.id}`:Xe(r)?r.event:"",m&&(o=this._eventEmitters.filter(g=>g.event===m)),(!o||!o.length)&&!(C.includes(i=m)||i.startsWith("wc_"))&&!Xe(m)&&(o=this._eventEmitters.filter(g=>"call_request"===g.event)),o.forEach(g=>{if(ye(r)){const w=new Error(r.error.message);g.callback(w,null)}else g.callback(null,r)})}},this._clientMeta=(0,y.getClientMeta)()||r.connectorOpts.clientMeta||null,this._cryptoLib=r.cryptoLib,this._sessionStorage=r.sessionStorage||new class{constructor(r="walletconnect"){this.storageId=r}getSession(){let r=null;const o=(0,y.getLocal)(this.storageId);return o&&void 0!==o.bridge&&(r=o),r}setSession(r){return(0,y.setLocal)(this.storageId,r),r}removeSession(){(0,y.removeLocal)(this.storageId)}}(r.connectorOpts.storageId),this._qrcodeModal=r.connectorOpts.qrcodeModal,this._qrcodeModalOptions=r.connectorOpts.qrcodeModalOptions,this._signingMethods=[...d,...r.connectorOpts.signingMethods||[]],!r.connectorOpts.bridge&&!r.connectorOpts.uri&&!r.connectorOpts.session)throw new Error("Missing one of the required parameters: bridge / uri / session");var i;r.connectorOpts.bridge&&(this.bridge=function(i){return"walletconnect.org"===function(i){return function(i){let r=i.indexOf("//")>-1?i.split("/")[2]:i.split("/")[0];return r=r.split(":")[0],r=r.split("?")[0],r}(i).split(".").slice(-2).join(".")}(i)}(i=r.connectorOpts.bridge)?sr[Math.floor(Math.random()*sr.length)]:i),r.connectorOpts.uri&&(this.uri=r.connectorOpts.uri);const o=r.connectorOpts.session||this._getStorageSession();o&&(this.session=o),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=r.transport||new class{constructor(r){if(this.opts=r,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=r.protocol,this._version=r.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=r.subscriptions||[],this._netMonitor=r.netMonitor||new class{constructor(){this._eventEmitters=[],"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(r,o){this._eventEmitters.push({event:r,callback:o})}trigger(r){let o=[];r&&(o=this._eventEmitters.filter(m=>m.event===r)),o.forEach(m=>{m.callback()})}},!r.url||"string"!=typeof r.url)throw new Error("Missing or invalid WebSocket url");this._url=r.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(r){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(r){}get connecting(){return 0===this.readyState}set connected(r){}get connected(){return 1===this.readyState}set closing(r){}get closing(){return 2===this.readyState}set closed(r){}get closed(){return 3===this.readyState}open(){this._socketCreate()}close(){this._socketClose()}send(r,o,m){if(!o||"string"!=typeof o)throw new Error("Missing or invalid topic field");this._socketSend({topic:o,type:"pub",payload:r,silent:!!m})}subscribe(r){this._socketSend({topic:r,type:"sub",payload:"",silent:!0})}on(r,o){this._events.push({event:r,callback:o})}_socketCreate(){if(this._nextSocket)return;const r=function(i,r,o){var m,g;const O=(i.startsWith("https")?i.replace("https","wss"):i.startsWith("http")?i.replace("http","ws"):i).split("?"),wt=(0,y.isBrowser)()?{protocol:r,version:o,env:"browser",host:(null===(m=(0,y.getLocation)())||void 0===m?void 0:m.host)||""}:{protocol:r,version:o,env:(null===(g=(0,y.detectEnv)())||void 0===g?void 0:g.name)||""},bt=function(i,r){let o=rr(i);return o=Object.assign(Object.assign({},o),r),function(i){return er.stringify(i)}(o)}(function(i){const r=-1!==i.indexOf("?")?i.indexOf("?"):void 0;return void 0!==r?i.substr(r):""}(O[1]||""),wt);return O[0]+"?"+bt}(this._url,this._protocol,this._version);if(this._nextSocket=new Rr(r),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=o=>this._socketReceive(o),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=o=>this._socketError(o),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(r){const o=JSON.stringify(r);this._socket&&1===this._socket.readyState?this._socket.send(o):(this._setToQueue(r),this._socketCreate())}_socketReceive(r){var o=this;return(0,E.Z)(function*(){let m;try{m=JSON.parse(r.data)}catch{return}if(o._socketSend({topic:m.topic,type:"ack",payload:"",silent:!0}),o._socket&&1===o._socket.readyState){const g=o._events.filter(w=>"message"===w.event);g&&g.length&&g.forEach(w=>w.callback(m))}})()}_socketError(r){const o=this._events.filter(m=>"error"===m.event);o&&o.length&&o.forEach(m=>m.callback(r))}_queueSubscriptions(){this._subscriptions.forEach(o=>this._queue.push({topic:o,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(r){this._queue.push(r)}_pushQueue(){this._queue.forEach(o=>this._socketSend(o)),this._queue=[]}}({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),r.connectorOpts.uri&&this._subscribeToSessionRequest(),r.pushServerOpts&&this._registerPushServer(r.pushServerOpts)}set bridge(r){!r||(this._bridge=r)}get bridge(){return this._bridge}set key(r){if(!r)return;const o=l(r).buffer;this._key=o}get key(){return this._key?(!0,t(new Uint8Array(this._key),!1)):""}set clientId(r){!r||(this._clientId=r)}get clientId(){let r=this._clientId;return r||(r=this._clientId=qt()),this._clientId}set peerId(r){!r||(this._peerId=r)}get peerId(){return this._peerId}set clientMeta(r){}get clientMeta(){let r=this._clientMeta;return r||(r=this._clientMeta=(0,y.getClientMeta)()),r}set peerMeta(r){this._peerMeta=r}get peerMeta(){return this._peerMeta}set handshakeTopic(r){!r||(this._handshakeTopic=r)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(r){!r||(this._handshakeId=r)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(r){if(!r)return;const{handshakeTopic:o,bridge:m,key:g}=this._parseUri(r);this.handshakeTopic=o,this.bridge=m,this.key=g}set chainId(r){this._chainId=r}get chainId(){return this._chainId}set networkId(r){this._networkId=r}get networkId(){return this._networkId}set accounts(r){this._accounts=r}get accounts(){return this._accounts}set rpcUrl(r){this._rpcUrl=r}get rpcUrl(){return this._rpcUrl}set connected(r){}get connected(){return this._connected}set pending(r){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(r){!r||(this._connected=r.connected,this.accounts=r.accounts,this.chainId=r.chainId,this.bridge=r.bridge,this.key=r.key,this.clientId=r.clientId,this.clientMeta=r.clientMeta,this.peerId=r.peerId,this.peerMeta=r.peerMeta,this.handshakeId=r.handshakeId,this.handshakeTopic=r.handshakeTopic)}on(r,o){this._eventManager.subscribe({event:r,callback:o})}off(r){this._eventManager.unsubscribe(r)}createInstantRequest(r){var o=this;return(0,E.Z)(function*(){o._key=yield o._generateKey();const m=o._formatRequest({method:"wc_instantRequest",params:[{peerId:o.clientId,peerMeta:o.clientMeta,request:o._formatRequest(r)}]});o.handshakeId=m.id,o.handshakeTopic=qt(),o._eventManager.trigger({event:"display_uri",params:[o.uri]}),o.on("modal_closed",()=>{throw new Error(ir)});const g=()=>{o.killSession()};try{const w=yield o._sendCallRequest(m);return w&&g(),w}catch(w){throw g(),w}})()}connect(r){var o=this;return(0,E.Z)(function*(){if(!o._qrcodeModal)throw new Error("QRCode Modal not provided");return o.connected?{chainId:o.chainId,accounts:o.accounts}:(yield o.createSession(r),new Promise(function(){var m=(0,E.Z)(function*(g,w){o.on("modal_closed",()=>w(new Error(ir))),o.on("connect",(O,wt)=>{if(O)return w(O);g(wt.params[0])})});return function(g,w){return m.apply(this,arguments)}}()))})()}createSession(r){var o=this;return(0,E.Z)(function*(){if(o._connected)throw new Error(Ae);if(o.pending)return;o._key=yield o._generateKey();const m=o._formatRequest({method:"wc_sessionRequest",params:[{peerId:o.clientId,peerMeta:o.clientMeta,chainId:r&&r.chainId?r.chainId:null}]});o.handshakeId=m.id,o.handshakeTopic=qt(),o._sendSessionRequest(m,"Session update rejected",{topic:o.handshakeTopic}),o._eventManager.trigger({event:"display_uri",params:[o.uri]})})()}approveSession(r){if(this._connected)throw new Error(Ae);this.chainId=r.chainId,this.accounts=r.accounts,this.networkId=r.networkId||0,this.rpcUrl=r.rpcUrl||"",this._sendResponse({id:this.handshakeId,jsonrpc:"2.0",result:{approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta}}),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(r){if(this._connected)throw new Error(Ae);const o=r&&r.message?r.message:"Session Rejected",m=this._formatResponse({id:this.handshakeId,error:{message:o}});this._sendResponse(m),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:o}]}),this._removeStorageSession()}updateSession(r){if(!this._connected)throw new Error(Ct);this.chainId=r.chainId,this.accounts=r.accounts,this.networkId=r.networkId||0,this.rpcUrl=r.rpcUrl||"";const m=this._formatRequest({method:"wc_sessionUpdate",params:[{approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl}]});this._sendSessionRequest(m,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}killSession(r){var o=this;return(0,E.Z)(function*(){const m=r?r.message:"Session Disconnected",w=o._formatRequest({method:"wc_sessionUpdate",params:[{approved:!1,chainId:null,networkId:null,accounts:null}]});yield o._sendRequest(w),o._handleSessionDisconnect(m)})()}sendTransaction(r){var o=this;return(0,E.Z)(function*(){if(!o._connected)throw new Error(Ct);const m=Ee(r),g=o._formatRequest({method:"eth_sendTransaction",params:[m]});return yield o._sendCallRequest(g)})()}signTransaction(r){var o=this;return(0,E.Z)(function*(){if(!o._connected)throw new Error(Ct);const m=Ee(r),g=o._formatRequest({method:"eth_signTransaction",params:[m]});return yield o._sendCallRequest(g)})()}signMessage(r){var o=this;return(0,E.Z)(function*(){if(!o._connected)throw new Error(Ct);const m=o._formatRequest({method:"eth_sign",params:r});return yield o._sendCallRequest(m)})()}signPersonalMessage(r){var o=this;return(0,E.Z)(function*(){if(!o._connected)throw new Error(Ct);r=tr(r);const m=o._formatRequest({method:"personal_sign",params:r});return yield o._sendCallRequest(m)})()}signTypedData(r){var o=this;return(0,E.Z)(function*(){if(!o._connected)throw new Error(Ct);const m=o._formatRequest({method:"eth_signTypedData",params:r});return yield o._sendCallRequest(m)})()}updateChain(r){var o=this;return(0,E.Z)(function*(){if(!o._connected)throw new Error("Session currently disconnected");const m=o._formatRequest({method:"wallet_updateChain",params:[r]});return yield o._sendCallRequest(m)})()}unsafeSend(r,o){return this._sendRequest(r,o),this._eventManager.trigger({event:"call_request_sent",params:[{request:r,options:o}]}),new Promise((m,g)=>{this._subscribeToResponse(r.id,(w,O)=>{if(w)g(w);else{if(!O)throw new Error("Missing JSON RPC response");m(O)}})})}sendCustomRequest(r,o){var m=this;return(0,E.Z)(function*(){if(!m._connected)throw new Error(Ct);switch(r.method){case"eth_accounts":return m.accounts;case"eth_chainId":return Gt(m.chainId);case"eth_sendTransaction":case"eth_signTransaction":r.params&&(r.params[0]=Ee(r.params[0]));break;case"personal_sign":r.params&&(r.params=tr(r.params))}const g=m._formatRequest(r);return yield m._sendCallRequest(g,o)})()}approveRequest(r){if(!Xt(r))throw new Error('JSON-RPC success response must include "result" field');{const o=this._formatResponse(r);this._sendResponse(o)}}rejectRequest(r){if(!ye(r))throw new Error('JSON-RPC error response must include "error" field');{const o=this._formatResponse(r);this._sendResponse(o)}}transportClose(){this._transport.close()}_sendRequest(r,o){var m=this;return(0,E.Z)(function*(){const g=m._formatRequest(r),w=yield m._encrypt(g),O=void 0!==(null==o?void 0:o.topic)?o.topic:m.peerId,wt=JSON.stringify(w),bt=void 0!==(null==o?void 0:o.forcePushNotification)?!o.forcePushNotification:!!(i=g).method.startsWith("wc_")||!d.includes(i.method);var i;m._transport.send(wt,O,bt)})()}_sendResponse(r){var o=this;return(0,E.Z)(function*(){const m=yield o._encrypt(r),g=o.peerId,w=JSON.stringify(m);o._transport.send(w,g,!0)})()}_sendSessionRequest(r,o,m){var g=this;return(0,E.Z)(function*(){g._sendRequest(r,m),g._subscribeToSessionResponse(r.id,o)})()}_sendCallRequest(r,o){return this._sendRequest(r,o),this._eventManager.trigger({event:"call_request_sent",params:[{request:r,options:o}]}),this._subscribeToCallResponse(r.id)}_formatRequest(r){if(void 0===r.method)throw new Error('JSON RPC request must have valid "method" value');return{id:void 0===r.id?zt():r.id,jsonrpc:"2.0",method:r.method,params:void 0===r.params?[]:r.params}}_formatResponse(r){if(void 0===r.id)throw new Error('JSON RPC request must have valid "id" value');const o={id:r.id,jsonrpc:"2.0"};if(ye(r)){const m=function(i){const r=i.message||"Failed or Rejected Request";let o=-32e3;if(i&&!i.code)switch(r){case"Parse error":o=-32700;break;case"Invalid request":o=-32600;break;case"Method not found":o=-32601;break;case"Invalid params":o=-32602;break;case"Internal error":o=-32603;break;default:o=-32e3}const m={code:o,message:r};return i.data&&(m.data=i.data),m}(r.error);return Object.assign(Object.assign(Object.assign({},o),r),{error:m})}if(Xt(r))return Object.assign(Object.assign({},o),r);throw new Error(nr)}_handleSessionDisconnect(r){const o=r||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),(0,y.removeLocal)(y.mobileLinkChoiceKey)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:o}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(r,o){o&&o.approved?(this._connected?(o.chainId&&(this.chainId=o.chainId),o.accounts&&(this.accounts=o.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,o.chainId&&(this.chainId=o.chainId),o.accounts&&(this.accounts=o.accounts),o.peerId&&!this.peerId&&(this.peerId=o.peerId),o.peerMeta&&!this.peerMeta&&(this.peerMeta=o.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(r)}_handleIncomingMessages(r){var o=this;return(0,E.Z)(function*(){if(![o.clientId,o.handshakeTopic].includes(r.topic))return;let g;try{g=JSON.parse(r.payload)}catch{return}const w=yield o._decrypt(g);w&&o._eventManager.trigger(w)})()}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(r,o){this.on(`response:${r}`,o)}_subscribeToSessionResponse(r,o){this._subscribeToResponse(r,(m,g)=>{m?this._handleSessionResponse(m.message):Xt(g)?this._handleSessionResponse(o,g.result):this._handleSessionResponse(g.error&&g.error.message?g.error.message:o)})}_subscribeToCallResponse(r){return new Promise((o,m)=>{this._subscribeToResponse(r,(g,w)=>{g?m(g):Xt(w)?o(w.result):m(w.error&&w.error.message?w.error:new Error(nr))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(r,o)=>{const{request:m}=o.params[0];if((0,y.isMobile)()&&this._signingMethods.includes(m.method)){const g=(0,y.getLocal)(y.mobileLinkChoiceKey);g&&(window.location.href=g.href)}}),this.on("wc_sessionRequest",(r,o)=>{r&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:r.toString()}]}),this.handshakeId=o.id,this.peerId=o.params[0].peerId,this.peerMeta=o.params[0].peerMeta;const m=Object.assign(Object.assign({},o),{method:"session_request"});this._eventManager.trigger(m)}),this.on("wc_sessionUpdate",(r,o)=>{r&&this._handleSessionResponse(r.message),this._handleSessionResponse("Session disconnected",o.params[0])})}_initTransport(){this._transport.on("message",r=>this._handleIncomingMessages(r)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){return`${this.protocol}:${this.handshakeTopic}@${this.version}?bridge=${encodeURIComponent(this.bridge)}&key=${this.key}`}_parseUri(r){const o=function(i){const r=i.indexOf(":"),o=-1!==i.indexOf("?")?i.indexOf("?"):void 0,m=i.substring(0,r),O=function(ee){const re=ee.split("@");return{handshakeTopic:re[0],version:parseInt(re[1],10)}}(i.substring(r+1,o)),Lt=function(ee){const Ft=rr(ee);return{key:Ft.key||"",bridge:Ft.bridge||""}}(void 0!==o?i.substr(o):"");return Object.assign(Object.assign({protocol:m},O),Lt)}(r);if(o.protocol===this.protocol){if(!o.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const m=o.handshakeTopic;if(!o.bridge)throw Error("Invalid or missing bridge url parameter value");const g=decodeURIComponent(o.bridge);if(!o.key)throw Error("Invalid or missing key parameter value");return{handshakeTopic:m,bridge:g,key:o.key}}throw new Error("URI format is invalid")}_generateKey(){var r=this;return(0,E.Z)(function*(){return r._cryptoLib?yield r._cryptoLib.generateKey():null})()}_encrypt(r){var o=this;return(0,E.Z)(function*(){const m=o._key;return o._cryptoLib&&m?yield o._cryptoLib.encrypt(r,m):null})()}_decrypt(r){var o=this;return(0,E.Z)(function*(){const m=o._key;return o._cryptoLib&&m?yield o._cryptoLib.decrypt(r,m):null})()}_getStorageSession(){let r=null;return this._sessionStorage&&(r=this._sessionStorage.getSession()),r}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(r){if(!r.url||"string"!=typeof r.url)throw Error("Invalid or missing pushServerOpts.url parameter value");if(!r.type||"string"!=typeof r.type)throw Error("Invalid or missing pushServerOpts.type parameter value");if(!r.token||"string"!=typeof r.token)throw Error("Invalid or missing pushServerOpts.token parameter value");const o={bridge:this.bridge,topic:this.clientId,type:r.type,token:r.token,peerName:"",language:r.language||""};this.on("connect",function(){var m=(0,E.Z)(function*(g,w){if(g)throw g;r.peerMeta&&(o.peerName=w.params[0].peerMeta.name);try{if(!(yield(yield fetch(`${r.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}});return function(g,w){return m.apply(this,arguments)}}())}}{constructor(r,o){super({cryptoLib:xt,connectorOpts:r,pushServerOpts:o})}}},80748:Rt=>{"use strict";Rt.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},87760:function(Rt,St,L){!function(xt,E){"use strict";function y(c,t){if(!c)throw new Error(t||"Assertion failed")}function C(c,t){c.super_=t;var n=function(){};n.prototype=t.prototype,c.prototype=new n,c.prototype.constructor=c}function d(c,t,n){if(d.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,null!==c&&(("le"===t||"be"===t)&&(n=t,t=10),this._init(c||0,t||10,n||"be"))}var Ut;"object"==typeof xt?xt.exports=d:E.BN=d,d.BN=d,d.wordSize=26;try{Ut=L(36563).Buffer}catch{}function Ht(c,t,n){for(var s=0,a=Math.min(c.length,n),u=t;u<a;u++){var l=c.charCodeAt(u)-48;s<<=4,s|=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:15&l}return s}function Q(c,t,n,s){for(var a=0,u=Math.min(c.length,n),l=t;l<u;l++){var p=c.charCodeAt(l)-48;a*=s,a+=p>=49?p-49+10:p>=17?p-17+10:p}return a}d.isBN=function(t){return t instanceof d||null!==t&&"object"==typeof t&&t.constructor.wordSize===d.wordSize&&Array.isArray(t.words)},d.max=function(t,n){return t.cmp(n)>0?t:n},d.min=function(t,n){return t.cmp(n)<0?t:n},d.prototype._init=function(t,n,s){if("number"==typeof t)return this._initNumber(t,n,s);if("object"==typeof t)return this._initArray(t,n,s);"hex"===n&&(n=16),y(n===(0|n)&&n>=2&&n<=36);var a=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&a++,16===n?this._parseHex(t,a):this._parseBase(t,n,a),"-"===t[0]&&(this.negative=1),this.strip(),"le"===s&&this._initArray(this.toArray(),n,s)},d.prototype._initNumber=function(t,n,s){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(y(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===s&&this._initArray(this.toArray(),n,s)},d.prototype._initArray=function(t,n,s){if(y("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var u,l,p=0;if("be"===s)for(a=t.length-1,u=0;a>=0;a-=3)this.words[u]|=(l=t[a]|t[a-1]<<8|t[a-2]<<16)<<p&67108863,this.words[u+1]=l>>>26-p&67108863,(p+=24)>=26&&(p-=26,u++);else if("le"===s)for(a=0,u=0;a<t.length;a+=3)this.words[u]|=(l=t[a]|t[a+1]<<8|t[a+2]<<16)<<p&67108863,this.words[u+1]=l>>>26-p&67108863,(p+=24)>=26&&(p-=26,u++);return this.strip()},d.prototype._parseHex=function(t,n){this.length=Math.ceil((t.length-n)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var a,u,l=0;for(s=t.length-6,a=0;s>=n;s-=6)u=Ht(t,s,s+6),this.words[a]|=u<<l&67108863,this.words[a+1]|=u>>>26-l&4194303,(l+=24)>=26&&(l-=26,a++);s+6!==n&&(u=Ht(t,n,s+6),this.words[a]|=u<<l&67108863,this.words[a+1]|=u>>>26-l&4194303),this.strip()},d.prototype._parseBase=function(t,n,s){this.words=[0],this.length=1;for(var a=0,u=1;u<=67108863;u*=n)a++;a--,u=u/n|0;for(var l=t.length-s,p=l%a,h=Math.min(l,l-p)+s,e=0,f=s;f<h;f+=a)e=Q(t,f,f+a,n),this.imuln(u),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(0!==p){var b=1;for(e=Q(t,f,t.length,n),f=0;f<p;f++)b*=n;this.imuln(b),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}},d.prototype.copy=function(t){t.words=new Array(this.length);for(var n=0;n<this.length;n++)t.words[n]=this.words[n];t.length=this.length,t.negative=this.negative,t.red=this.red},d.prototype.clone=function(){var t=new d(null);return this.copy(t),t},d.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var Tt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],jt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Pt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function It(c,t,n){n.negative=t.negative^c.negative;var s=c.length+t.length|0;n.length=s,s=s-1|0;var a=0|c.words[0],u=0|t.words[0],l=a*u,h=l/67108864|0;n.words[0]=67108863&l;for(var e=1;e<s;e++){for(var f=h>>>26,b=67108863&h,x=Math.min(e,t.length-1),R=Math.max(0,e-c.length+1);R<=x;R++)f+=(l=(a=0|c.words[e-R|0])*(u=0|t.words[R])+b)/67108864|0,b=67108863&l;n.words[e]=0|b,h=0|f}return 0!==h?n.words[e]=0|h:n.length--,n.strip()}d.prototype.toString=function(t,n){var s;if(n=0|n||1,16===(t=t||10)||"hex"===t){s="";for(var a=0,u=0,l=0;l<this.length;l++){var p=this.words[l],h=(16777215&(p<<a|u)).toString(16);s=0!=(u=p>>>24-a&16777215)||l!==this.length-1?Tt[6-h.length]+h+s:h+s,(a+=2)>=26&&(a-=26,l--)}for(0!==u&&(s=u.toString(16)+s);s.length%n!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}if(t===(0|t)&&t>=2&&t<=36){var e=jt[t],f=Pt[t];s="";var b=this.clone();for(b.negative=0;!b.isZero();){var x=b.modn(f).toString(t);s=(b=b.idivn(f)).isZero()?x+s:Tt[e-x.length]+x+s}for(this.isZero()&&(s="0"+s);s.length%n!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}y(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&y(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(t,n){return y(void 0!==Ut),this.toArrayLike(Ut,t,n)},d.prototype.toArray=function(t,n){return this.toArrayLike(Array,t,n)},d.prototype.toArrayLike=function(t,n,s){var a=this.byteLength(),u=s||Math.max(1,a);y(a<=u,"byte array longer than desired length"),y(u>0,"Requested array length <= 0"),this.strip();var h,e,l="le"===n,p=new t(u),f=this.clone();if(l){for(e=0;!f.isZero();e++)h=f.andln(255),f.iushrn(8),p[e]=h;for(;e<u;e++)p[e]=0}else{for(e=0;e<u-a;e++)p[e]=0;for(e=0;!f.isZero();e++)h=f.andln(255),f.iushrn(8),p[u-e-1]=h}return p},d.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var n=t,s=0;return n>=4096&&(s+=13,n>>>=13),n>=64&&(s+=7,n>>>=7),n>=8&&(s+=4,n>>>=4),n>=2&&(s+=2,n>>>=2),s+n},d.prototype._zeroBits=function(t){if(0===t)return 26;var n=t,s=0;return 0==(8191&n)&&(s+=13,n>>>=13),0==(127&n)&&(s+=7,n>>>=7),0==(15&n)&&(s+=4,n>>>=4),0==(3&n)&&(s+=2,n>>>=2),0==(1&n)&&s++,s},d.prototype.bitLength=function(){var n=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+n},d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,n=0;n<this.length;n++){var s=this._zeroBits(this.words[n]);if(t+=s,26!==s)break}return t},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},d.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return 0!==this.negative},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]|t.words[n];return this.strip()},d.prototype.ior=function(t){return y(0==(this.negative|t.negative)),this.iuor(t)},d.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},d.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},d.prototype.iuand=function(t){var n;n=this.length>t.length?t:this;for(var s=0;s<n.length;s++)this.words[s]=this.words[s]&t.words[s];return this.length=n.length,this.strip()},d.prototype.iand=function(t){return y(0==(this.negative|t.negative)),this.iuand(t)},d.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},d.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},d.prototype.iuxor=function(t){var n,s;this.length>t.length?(n=this,s=t):(n=t,s=this);for(var a=0;a<s.length;a++)this.words[a]=n.words[a]^s.words[a];if(this!==n)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=n.length,this.strip()},d.prototype.ixor=function(t){return y(0==(this.negative|t.negative)),this.iuxor(t)},d.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},d.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},d.prototype.inotn=function(t){y("number"==typeof t&&t>=0);var n=0|Math.ceil(t/26),s=t%26;this._expand(n),s>0&&n--;for(var a=0;a<n;a++)this.words[a]=67108863&~this.words[a];return s>0&&(this.words[a]=~this.words[a]&67108863>>26-s),this.strip()},d.prototype.notn=function(t){return this.clone().inotn(t)},d.prototype.setn=function(t,n){y("number"==typeof t&&t>=0);var s=t/26|0,a=t%26;return this._expand(s+1),this.words[s]=n?this.words[s]|1<<a:this.words[s]&~(1<<a),this.strip()},d.prototype.iadd=function(t){var n,s,a;if(0!==this.negative&&0===t.negative)return this.negative=0,n=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,n=this.isub(t),t.negative=1,n._normSign();this.length>t.length?(s=this,a=t):(s=t,a=this);for(var u=0,l=0;l<a.length;l++)this.words[l]=67108863&(n=(0|s.words[l])+(0|a.words[l])+u),u=n>>>26;for(;0!==u&&l<s.length;l++)this.words[l]=67108863&(n=(0|s.words[l])+u),u=n>>>26;if(this.length=s.length,0!==u)this.words[this.length]=u,this.length++;else if(s!==this)for(;l<s.length;l++)this.words[l]=s.words[l];return this},d.prototype.add=function(t){var n;return 0!==t.negative&&0===this.negative?(t.negative=0,n=this.sub(t),t.negative^=1,n):0===t.negative&&0!==this.negative?(this.negative=0,n=t.sub(this),this.negative=1,n):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},d.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var a,u,s=this.cmp(t);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(a=this,u=t):(a=t,u=this);for(var l=0,p=0;p<u.length;p++)l=(n=(0|a.words[p])-(0|u.words[p])+l)>>26,this.words[p]=67108863&n;for(;0!==l&&p<a.length;p++)l=(n=(0|a.words[p])+l)>>26,this.words[p]=67108863&n;if(0===l&&p<a.length&&a!==this)for(;p<a.length;p++)this.words[p]=a.words[p];return this.length=Math.max(this.length,p),a!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(t){return this.clone().isub(t)};var kt=function(t,n,s){var h,e,f,a=t.words,u=n.words,l=s.words,p=0,b=0|a[0],x=8191&b,R=b>>>13,I=0|a[1],A=8191&I,U=I>>>13,Et=0|a[2],H=8191&Et,B=Et>>>13,ne=0|a[3],P=8191&ne,D=ne>>>13,Me=0|a[4],at=8191&Me,V=Me>>>13,Wt=0|a[5],Z=8191&Wt,W=Wt>>>13,ie=0|a[6],ht=8191&ie,ft=ie>>>13,we=0|a[7],$=8191&we,ut=we>>>13,be=0|a[8],Y=8191&be,K=be>>>13,se=0|a[9],ct=8191&se,G=se>>>13,oe=0|u[0],lt=8191&oe,q=oe>>>13,At=0|u[1],J=8191&At,X=At>>>13,ae=0|u[2],tt=8191&ae,et=ae>>>13,he=0|u[3],z=8191&he,F=he>>>13,Se=0|u[4],rt=8191&Se,dt=Se>>>13,xe=0|u[5],nt=8191&xe,pt=xe>>>13,Re=0|u[6],mt=8191&Re,gt=Re>>>13,Te=0|u[7],it=8191&Te,st=Te>>>13,Ie=0|u[8],vt=8191&Ie,ot=Ie>>>13,ke=0|u[9],yt=8191&ke,_t=ke>>>13;s.negative=t.negative^n.negative,s.length=19;var fe=(p+(h=Math.imul(x,lt))|0)+((8191&(e=(e=Math.imul(x,q))+Math.imul(R,lt)|0))<<13)|0;p=((f=Math.imul(R,q))+(e>>>13)|0)+(fe>>>26)|0,fe&=67108863,h=Math.imul(A,lt),e=(e=Math.imul(A,q))+Math.imul(U,lt)|0,f=Math.imul(U,q);var ue=(p+(h=h+Math.imul(x,J)|0)|0)+((8191&(e=(e=e+Math.imul(x,X)|0)+Math.imul(R,J)|0))<<13)|0;p=((f=f+Math.imul(R,X)|0)+(e>>>13)|0)+(ue>>>26)|0,ue&=67108863,h=Math.imul(H,lt),e=(e=Math.imul(H,q))+Math.imul(B,lt)|0,f=Math.imul(B,q),h=h+Math.imul(A,J)|0,e=(e=e+Math.imul(A,X)|0)+Math.imul(U,J)|0,f=f+Math.imul(U,X)|0;var Gt=(p+(h=h+Math.imul(x,tt)|0)|0)+((8191&(e=(e=e+Math.imul(x,et)|0)+Math.imul(R,tt)|0))<<13)|0;p=((f=f+Math.imul(R,et)|0)+(e>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,h=Math.imul(P,lt),e=(e=Math.imul(P,q))+Math.imul(D,lt)|0,f=Math.imul(D,q),h=h+Math.imul(H,J)|0,e=(e=e+Math.imul(H,X)|0)+Math.imul(B,J)|0,f=f+Math.imul(B,X)|0,h=h+Math.imul(A,tt)|0,e=(e=e+Math.imul(A,et)|0)+Math.imul(U,tt)|0,f=f+Math.imul(U,et)|0;var $t=(p+(h=h+Math.imul(x,z)|0)|0)+((8191&(e=(e=e+Math.imul(x,F)|0)+Math.imul(R,z)|0))<<13)|0;p=((f=f+Math.imul(R,F)|0)+(e>>>13)|0)+($t>>>26)|0,$t&=67108863,h=Math.imul(at,lt),e=(e=Math.imul(at,q))+Math.imul(V,lt)|0,f=Math.imul(V,q),h=h+Math.imul(P,J)|0,e=(e=e+Math.imul(P,X)|0)+Math.imul(D,J)|0,f=f+Math.imul(D,X)|0,h=h+Math.imul(H,tt)|0,e=(e=e+Math.imul(H,et)|0)+Math.imul(B,tt)|0,f=f+Math.imul(B,et)|0,h=h+Math.imul(A,z)|0,e=(e=e+Math.imul(A,F)|0)+Math.imul(U,z)|0,f=f+Math.imul(U,F)|0;var Kt=(p+(h=h+Math.imul(x,rt)|0)|0)+((8191&(e=(e=e+Math.imul(x,dt)|0)+Math.imul(R,rt)|0))<<13)|0;p=((f=f+Math.imul(R,dt)|0)+(e>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,h=Math.imul(Z,lt),e=(e=Math.imul(Z,q))+Math.imul(W,lt)|0,f=Math.imul(W,q),h=h+Math.imul(at,J)|0,e=(e=e+Math.imul(at,X)|0)+Math.imul(V,J)|0,f=f+Math.imul(V,X)|0,h=h+Math.imul(P,tt)|0,e=(e=e+Math.imul(P,et)|0)+Math.imul(D,tt)|0,f=f+Math.imul(D,et)|0,h=h+Math.imul(H,z)|0,e=(e=e+Math.imul(H,F)|0)+Math.imul(B,z)|0,f=f+Math.imul(B,F)|0,h=h+Math.imul(A,rt)|0,e=(e=e+Math.imul(A,dt)|0)+Math.imul(U,rt)|0,f=f+Math.imul(U,dt)|0;var Nt=(p+(h=h+Math.imul(x,nt)|0)|0)+((8191&(e=(e=e+Math.imul(x,pt)|0)+Math.imul(R,nt)|0))<<13)|0;p=((f=f+Math.imul(R,pt)|0)+(e>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,h=Math.imul(ht,lt),e=(e=Math.imul(ht,q))+Math.imul(ft,lt)|0,f=Math.imul(ft,q),h=h+Math.imul(Z,J)|0,e=(e=e+Math.imul(Z,X)|0)+Math.imul(W,J)|0,f=f+Math.imul(W,X)|0,h=h+Math.imul(at,tt)|0,e=(e=e+Math.imul(at,et)|0)+Math.imul(V,tt)|0,f=f+Math.imul(V,et)|0,h=h+Math.imul(P,z)|0,e=(e=e+Math.imul(P,F)|0)+Math.imul(D,z)|0,f=f+Math.imul(D,F)|0,h=h+Math.imul(H,rt)|0,e=(e=e+Math.imul(H,dt)|0)+Math.imul(B,rt)|0,f=f+Math.imul(B,dt)|0,h=h+Math.imul(A,nt)|0,e=(e=e+Math.imul(A,pt)|0)+Math.imul(U,nt)|0,f=f+Math.imul(U,pt)|0;var ce=(p+(h=h+Math.imul(x,mt)|0)|0)+((8191&(e=(e=e+Math.imul(x,gt)|0)+Math.imul(R,mt)|0))<<13)|0;p=((f=f+Math.imul(R,gt)|0)+(e>>>13)|0)+(ce>>>26)|0,ce&=67108863,h=Math.imul($,lt),e=(e=Math.imul($,q))+Math.imul(ut,lt)|0,f=Math.imul(ut,q),h=h+Math.imul(ht,J)|0,e=(e=e+Math.imul(ht,X)|0)+Math.imul(ft,J)|0,f=f+Math.imul(ft,X)|0,h=h+Math.imul(Z,tt)|0,e=(e=e+Math.imul(Z,et)|0)+Math.imul(W,tt)|0,f=f+Math.imul(W,et)|0,h=h+Math.imul(at,z)|0,e=(e=e+Math.imul(at,F)|0)+Math.imul(V,z)|0,f=f+Math.imul(V,F)|0,h=h+Math.imul(P,rt)|0,e=(e=e+Math.imul(P,dt)|0)+Math.imul(D,rt)|0,f=f+Math.imul(D,dt)|0,h=h+Math.imul(H,nt)|0,e=(e=e+Math.imul(H,pt)|0)+Math.imul(B,nt)|0,f=f+Math.imul(B,pt)|0,h=h+Math.imul(A,mt)|0,e=(e=e+Math.imul(A,gt)|0)+Math.imul(U,mt)|0,f=f+Math.imul(U,gt)|0;var le=(p+(h=h+Math.imul(x,it)|0)|0)+((8191&(e=(e=e+Math.imul(x,st)|0)+Math.imul(R,it)|0))<<13)|0;p=((f=f+Math.imul(R,st)|0)+(e>>>13)|0)+(le>>>26)|0,le&=67108863,h=Math.imul(Y,lt),e=(e=Math.imul(Y,q))+Math.imul(K,lt)|0,f=Math.imul(K,q),h=h+Math.imul($,J)|0,e=(e=e+Math.imul($,X)|0)+Math.imul(ut,J)|0,f=f+Math.imul(ut,X)|0,h=h+Math.imul(ht,tt)|0,e=(e=e+Math.imul(ht,et)|0)+Math.imul(ft,tt)|0,f=f+Math.imul(ft,et)|0,h=h+Math.imul(Z,z)|0,e=(e=e+Math.imul(Z,F)|0)+Math.imul(W,z)|0,f=f+Math.imul(W,F)|0,h=h+Math.imul(at,rt)|0,e=(e=e+Math.imul(at,dt)|0)+Math.imul(V,rt)|0,f=f+Math.imul(V,dt)|0,h=h+Math.imul(P,nt)|0,e=(e=e+Math.imul(P,pt)|0)+Math.imul(D,nt)|0,f=f+Math.imul(D,pt)|0,h=h+Math.imul(H,mt)|0,e=(e=e+Math.imul(H,gt)|0)+Math.imul(B,mt)|0,f=f+Math.imul(B,gt)|0,h=h+Math.imul(A,it)|0,e=(e=e+Math.imul(A,st)|0)+Math.imul(U,it)|0,f=f+Math.imul(U,st)|0;var Jt=(p+(h=h+Math.imul(x,vt)|0)|0)+((8191&(e=(e=e+Math.imul(x,ot)|0)+Math.imul(R,vt)|0))<<13)|0;p=((f=f+Math.imul(R,ot)|0)+(e>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,h=Math.imul(ct,lt),e=(e=Math.imul(ct,q))+Math.imul(G,lt)|0,f=Math.imul(G,q),h=h+Math.imul(Y,J)|0,e=(e=e+Math.imul(Y,X)|0)+Math.imul(K,J)|0,f=f+Math.imul(K,X)|0,h=h+Math.imul($,tt)|0,e=(e=e+Math.imul($,et)|0)+Math.imul(ut,tt)|0,f=f+Math.imul(ut,et)|0,h=h+Math.imul(ht,z)|0,e=(e=e+Math.imul(ht,F)|0)+Math.imul(ft,z)|0,f=f+Math.imul(ft,F)|0,h=h+Math.imul(Z,rt)|0,e=(e=e+Math.imul(Z,dt)|0)+Math.imul(W,rt)|0,f=f+Math.imul(W,dt)|0,h=h+Math.imul(at,nt)|0,e=(e=e+Math.imul(at,pt)|0)+Math.imul(V,nt)|0,f=f+Math.imul(V,pt)|0,h=h+Math.imul(P,mt)|0,e=(e=e+Math.imul(P,gt)|0)+Math.imul(D,mt)|0,f=f+Math.imul(D,gt)|0,h=h+Math.imul(H,it)|0,e=(e=e+Math.imul(H,st)|0)+Math.imul(B,it)|0,f=f+Math.imul(B,st)|0,h=h+Math.imul(A,vt)|0,e=(e=e+Math.imul(A,ot)|0)+Math.imul(U,vt)|0,f=f+Math.imul(U,ot)|0;var zt=(p+(h=h+Math.imul(x,yt)|0)|0)+((8191&(e=(e=e+Math.imul(x,_t)|0)+Math.imul(R,yt)|0))<<13)|0;p=((f=f+Math.imul(R,_t)|0)+(e>>>13)|0)+(zt>>>26)|0,zt&=67108863,h=Math.imul(ct,J),e=(e=Math.imul(ct,X))+Math.imul(G,J)|0,f=Math.imul(G,X),h=h+Math.imul(Y,tt)|0,e=(e=e+Math.imul(Y,et)|0)+Math.imul(K,tt)|0,f=f+Math.imul(K,et)|0,h=h+Math.imul($,z)|0,e=(e=e+Math.imul($,F)|0)+Math.imul(ut,z)|0,f=f+Math.imul(ut,F)|0,h=h+Math.imul(ht,rt)|0,e=(e=e+Math.imul(ht,dt)|0)+Math.imul(ft,rt)|0,f=f+Math.imul(ft,dt)|0,h=h+Math.imul(Z,nt)|0,e=(e=e+Math.imul(Z,pt)|0)+Math.imul(W,nt)|0,f=f+Math.imul(W,pt)|0,h=h+Math.imul(at,mt)|0,e=(e=e+Math.imul(at,gt)|0)+Math.imul(V,mt)|0,f=f+Math.imul(V,gt)|0,h=h+Math.imul(P,it)|0,e=(e=e+Math.imul(P,st)|0)+Math.imul(D,it)|0,f=f+Math.imul(D,st)|0,h=h+Math.imul(H,vt)|0,e=(e=e+Math.imul(H,ot)|0)+Math.imul(B,vt)|0,f=f+Math.imul(B,ot)|0;var qt=(p+(h=h+Math.imul(A,yt)|0)|0)+((8191&(e=(e=e+Math.imul(A,_t)|0)+Math.imul(U,yt)|0))<<13)|0;p=((f=f+Math.imul(U,_t)|0)+(e>>>13)|0)+(qt>>>26)|0,qt&=67108863,h=Math.imul(ct,tt),e=(e=Math.imul(ct,et))+Math.imul(G,tt)|0,f=Math.imul(G,et),h=h+Math.imul(Y,z)|0,e=(e=e+Math.imul(Y,F)|0)+Math.imul(K,z)|0,f=f+Math.imul(K,F)|0,h=h+Math.imul($,rt)|0,e=(e=e+Math.imul($,dt)|0)+Math.imul(ut,rt)|0,f=f+Math.imul(ut,dt)|0,h=h+Math.imul(ht,nt)|0,e=(e=e+Math.imul(ht,pt)|0)+Math.imul(ft,nt)|0,f=f+Math.imul(ft,pt)|0,h=h+Math.imul(Z,mt)|0,e=(e=e+Math.imul(Z,gt)|0)+Math.imul(W,mt)|0,f=f+Math.imul(W,gt)|0,h=h+Math.imul(at,it)|0,e=(e=e+Math.imul(at,st)|0)+Math.imul(V,it)|0,f=f+Math.imul(V,st)|0,h=h+Math.imul(P,vt)|0,e=(e=e+Math.imul(P,ot)|0)+Math.imul(D,vt)|0,f=f+Math.imul(D,ot)|0;var de=(p+(h=h+Math.imul(H,yt)|0)|0)+((8191&(e=(e=e+Math.imul(H,_t)|0)+Math.imul(B,yt)|0))<<13)|0;p=((f=f+Math.imul(B,_t)|0)+(e>>>13)|0)+(de>>>26)|0,de&=67108863,h=Math.imul(ct,z),e=(e=Math.imul(ct,F))+Math.imul(G,z)|0,f=Math.imul(G,F),h=h+Math.imul(Y,rt)|0,e=(e=e+Math.imul(Y,dt)|0)+Math.imul(K,rt)|0,f=f+Math.imul(K,dt)|0,h=h+Math.imul($,nt)|0,e=(e=e+Math.imul($,pt)|0)+Math.imul(ut,nt)|0,f=f+Math.imul(ut,pt)|0,h=h+Math.imul(ht,mt)|0,e=(e=e+Math.imul(ht,gt)|0)+Math.imul(ft,mt)|0,f=f+Math.imul(ft,gt)|0,h=h+Math.imul(Z,it)|0,e=(e=e+Math.imul(Z,st)|0)+Math.imul(W,it)|0,f=f+Math.imul(W,st)|0,h=h+Math.imul(at,vt)|0,e=(e=e+Math.imul(at,ot)|0)+Math.imul(V,vt)|0,f=f+Math.imul(V,ot)|0;var Qt=(p+(h=h+Math.imul(P,yt)|0)|0)+((8191&(e=(e=e+Math.imul(P,_t)|0)+Math.imul(D,yt)|0))<<13)|0;p=((f=f+Math.imul(D,_t)|0)+(e>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,h=Math.imul(ct,rt),e=(e=Math.imul(ct,dt))+Math.imul(G,rt)|0,f=Math.imul(G,dt),h=h+Math.imul(Y,nt)|0,e=(e=e+Math.imul(Y,pt)|0)+Math.imul(K,nt)|0,f=f+Math.imul(K,pt)|0,h=h+Math.imul($,mt)|0,e=(e=e+Math.imul($,gt)|0)+Math.imul(ut,mt)|0,f=f+Math.imul(ut,gt)|0,h=h+Math.imul(ht,it)|0,e=(e=e+Math.imul(ht,st)|0)+Math.imul(ft,it)|0,f=f+Math.imul(ft,st)|0,h=h+Math.imul(Z,vt)|0,e=(e=e+Math.imul(Z,ot)|0)+Math.imul(W,vt)|0,f=f+Math.imul(W,ot)|0;var pe=(p+(h=h+Math.imul(at,yt)|0)|0)+((8191&(e=(e=e+Math.imul(at,_t)|0)+Math.imul(V,yt)|0))<<13)|0;p=((f=f+Math.imul(V,_t)|0)+(e>>>13)|0)+(pe>>>26)|0,pe&=67108863,h=Math.imul(ct,nt),e=(e=Math.imul(ct,pt))+Math.imul(G,nt)|0,f=Math.imul(G,pt),h=h+Math.imul(Y,mt)|0,e=(e=e+Math.imul(Y,gt)|0)+Math.imul(K,mt)|0,f=f+Math.imul(K,gt)|0,h=h+Math.imul($,it)|0,e=(e=e+Math.imul($,st)|0)+Math.imul(ut,it)|0,f=f+Math.imul(ut,st)|0,h=h+Math.imul(ht,vt)|0,e=(e=e+Math.imul(ht,ot)|0)+Math.imul(ft,vt)|0,f=f+Math.imul(ft,ot)|0;var Vt=(p+(h=h+Math.imul(Z,yt)|0)|0)+((8191&(e=(e=e+Math.imul(Z,_t)|0)+Math.imul(W,yt)|0))<<13)|0;p=((f=f+Math.imul(W,_t)|0)+(e>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,h=Math.imul(ct,mt),e=(e=Math.imul(ct,gt))+Math.imul(G,mt)|0,f=Math.imul(G,gt),h=h+Math.imul(Y,it)|0,e=(e=e+Math.imul(Y,st)|0)+Math.imul(K,it)|0,f=f+Math.imul(K,st)|0,h=h+Math.imul($,vt)|0,e=(e=e+Math.imul($,ot)|0)+Math.imul(ut,vt)|0,f=f+Math.imul(ut,ot)|0;var Yt=(p+(h=h+Math.imul(ht,yt)|0)|0)+((8191&(e=(e=e+Math.imul(ht,_t)|0)+Math.imul(ft,yt)|0))<<13)|0;p=((f=f+Math.imul(ft,_t)|0)+(e>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,h=Math.imul(ct,it),e=(e=Math.imul(ct,st))+Math.imul(G,it)|0,f=Math.imul(G,st),h=h+Math.imul(Y,vt)|0,e=(e=e+Math.imul(Y,ot)|0)+Math.imul(K,vt)|0,f=f+Math.imul(K,ot)|0;var me=(p+(h=h+Math.imul($,yt)|0)|0)+((8191&(e=(e=e+Math.imul($,_t)|0)+Math.imul(ut,yt)|0))<<13)|0;p=((f=f+Math.imul(ut,_t)|0)+(e>>>13)|0)+(me>>>26)|0,me&=67108863,h=Math.imul(ct,vt),e=(e=Math.imul(ct,ot))+Math.imul(G,vt)|0,f=Math.imul(G,ot);var ge=(p+(h=h+Math.imul(Y,yt)|0)|0)+((8191&(e=(e=e+Math.imul(Y,_t)|0)+Math.imul(K,yt)|0))<<13)|0;p=((f=f+Math.imul(K,_t)|0)+(e>>>13)|0)+(ge>>>26)|0,ge&=67108863;var ve=(p+(h=Math.imul(ct,yt))|0)+((8191&(e=(e=Math.imul(ct,_t))+Math.imul(G,yt)|0))<<13)|0;return p=((f=Math.imul(G,_t))+(e>>>13)|0)+(ve>>>26)|0,ve&=67108863,l[0]=fe,l[1]=ue,l[2]=Gt,l[3]=$t,l[4]=Kt,l[5]=Nt,l[6]=ce,l[7]=le,l[8]=Jt,l[9]=zt,l[10]=qt,l[11]=de,l[12]=Qt,l[13]=pe,l[14]=Vt,l[15]=Yt,l[16]=me,l[17]=ge,l[18]=ve,0!==p&&(l[19]=p,s.length++),s};function v(c,t,n){return(new _).mulp(c,t,n)}function _(c,t){this.x=c,this.y=t}Math.imul||(kt=It),d.prototype.mulTo=function(t,n){var s,a=this.length+t.length;return s=10===this.length&&10===t.length?kt(this,t,n):a<63?It(this,t,n):a<1024?function(c,t,n){n.negative=t.negative^c.negative,n.length=c.length+t.length;for(var s=0,a=0,u=0;u<n.length-1;u++){var l=a;a=0;for(var p=67108863&s,h=Math.min(u,t.length-1),e=Math.max(0,u-c.length+1);e<=h;e++){var R=(0|c.words[u-e])*(0|t.words[e]),I=67108863&R;p=67108863&(I=I+p|0),a+=(l=(l=l+(R/67108864|0)|0)+(I>>>26)|0)>>>26,l&=67108863}n.words[u]=p,s=l,l=a}return 0!==s?n.words[u]=s:n.length--,n.strip()}(this,t,n):v(this,t,n),s},_.prototype.makeRBT=function(t){for(var n=new Array(t),s=d.prototype._countBits(t)-1,a=0;a<t;a++)n[a]=this.revBin(a,s,t);return n},_.prototype.revBin=function(t,n,s){if(0===t||t===s-1)return t;for(var a=0,u=0;u<n;u++)a|=(1&t)<<n-u-1,t>>=1;return a},_.prototype.permute=function(t,n,s,a,u,l){for(var p=0;p<l;p++)a[p]=n[t[p]],u[p]=s[t[p]]},_.prototype.transform=function(t,n,s,a,u,l){this.permute(l,t,n,s,a,u);for(var p=1;p<u;p<<=1)for(var h=p<<1,e=Math.cos(2*Math.PI/h),f=Math.sin(2*Math.PI/h),b=0;b<u;b+=h)for(var x=e,R=f,I=0;I<p;I++){var A=s[b+I],U=a[b+I],Et=s[b+I+p],H=a[b+I+p],B=x*Et-R*H;H=x*H+R*Et,s[b+I]=A+(Et=B),a[b+I]=U+H,s[b+I+p]=A-Et,a[b+I+p]=U-H,I!==h&&(B=e*x-f*R,R=e*R+f*x,x=B)}},_.prototype.guessLen13b=function(t,n){var s=1|Math.max(n,t),a=1&s,u=0;for(s=s/2|0;s;s>>>=1)u++;return 1<<u+1+a},_.prototype.conjugate=function(t,n,s){if(!(s<=1))for(var a=0;a<s/2;a++){var u=t[a];t[a]=t[s-a-1],t[s-a-1]=u,u=n[a],n[a]=-n[s-a-1],n[s-a-1]=-u}},_.prototype.normalize13b=function(t,n){for(var s=0,a=0;a<n/2;a++){var u=8192*Math.round(t[2*a+1]/n)+Math.round(t[2*a]/n)+s;t[a]=67108863&u,s=u<67108864?0:u/67108864|0}return t},_.prototype.convert13b=function(t,n,s,a){for(var u=0,l=0;l<n;l++)s[2*l]=8191&(u+=0|t[l]),s[2*l+1]=8191&(u>>>=13),u>>>=13;for(l=2*n;l<a;++l)s[l]=0;y(0===u),y(0==(-8192&u))},_.prototype.stub=function(t){for(var n=new Array(t),s=0;s<t;s++)n[s]=0;return n},_.prototype.mulp=function(t,n,s){var a=2*this.guessLen13b(t.length,n.length),u=this.makeRBT(a),l=this.stub(a),p=new Array(a),h=new Array(a),e=new Array(a),f=new Array(a),b=new Array(a),x=new Array(a),R=s.words;R.length=a,this.convert13b(t.words,t.length,p,a),this.convert13b(n.words,n.length,f,a),this.transform(p,l,h,e,a,u),this.transform(f,l,b,x,a,u);for(var I=0;I<a;I++){var A=h[I]*b[I]-e[I]*x[I];e[I]=h[I]*x[I]+e[I]*b[I],h[I]=A}return this.conjugate(h,e,a),this.transform(h,e,R,l,a,u),this.conjugate(R,l,a),this.normalize13b(R,a),s.negative=t.negative^n.negative,s.length=t.length+n.length,s.strip()},d.prototype.mul=function(t){var n=new d(null);return n.words=new Array(this.length+t.length),this.mulTo(t,n)},d.prototype.mulf=function(t){var n=new d(null);return n.words=new Array(this.length+t.length),v(this,t,n)},d.prototype.imul=function(t){return this.clone().mulTo(t,this)},d.prototype.imuln=function(t){y("number"==typeof t),y(t<67108864);for(var n=0,s=0;s<this.length;s++){var a=(0|this.words[s])*t,u=(67108863&a)+(67108863&n);n>>=26,n+=a/67108864|0,n+=u>>>26,this.words[s]=67108863&u}return 0!==n&&(this.words[s]=n,this.length++),this},d.prototype.muln=function(t){return this.clone().imuln(t)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(t){var n=function(c){for(var t=new Array(c.bitLength()),n=0;n<t.length;n++){var a=n%26;t[n]=(c.words[n/26|0]&1<<a)>>>a}return t}(t);if(0===n.length)return new d(1);for(var s=this,a=0;a<n.length&&0===n[a];a++,s=s.sqr());if(++a<n.length)for(var u=s.sqr();a<n.length;a++,u=u.sqr())0!==n[a]&&(s=s.mul(u));return s},d.prototype.iushln=function(t){y("number"==typeof t&&t>=0);var u,n=t%26,s=(t-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var l=0;for(u=0;u<this.length;u++){var p=this.words[u]&a;this.words[u]=(0|this.words[u])-p<<n|l,l=p>>>26-n}l&&(this.words[u]=l,this.length++)}if(0!==s){for(u=this.length-1;u>=0;u--)this.words[u+s]=this.words[u];for(u=0;u<s;u++)this.words[u]=0;this.length+=s}return this.strip()},d.prototype.ishln=function(t){return y(0===this.negative),this.iushln(t)},d.prototype.iushrn=function(t,n,s){var a;y("number"==typeof t&&t>=0),a=n?(n-n%26)/26:0;var u=t%26,l=Math.min((t-u)/26,this.length),p=67108863^67108863>>>u<<u,h=s;if(a-=l,a=Math.max(0,a),h){for(var e=0;e<l;e++)h.words[e]=this.words[e];h.length=l}if(0!==l)if(this.length>l)for(this.length-=l,e=0;e<this.length;e++)this.words[e]=this.words[e+l];else this.words[0]=0,this.length=1;var f=0;for(e=this.length-1;e>=0&&(0!==f||e>=a);e--){var b=0|this.words[e];this.words[e]=f<<26-u|b>>>u,f=b&p}return h&&0!==f&&(h.words[h.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(t,n,s){return y(0===this.negative),this.iushrn(t,n,s)},d.prototype.shln=function(t){return this.clone().ishln(t)},d.prototype.ushln=function(t){return this.clone().iushln(t)},d.prototype.shrn=function(t){return this.clone().ishrn(t)},d.prototype.ushrn=function(t){return this.clone().iushrn(t)},d.prototype.testn=function(t){y("number"==typeof t&&t>=0);var n=t%26,s=(t-n)/26;return!(this.length<=s||!(this.words[s]&1<<n))},d.prototype.imaskn=function(t){y("number"==typeof t&&t>=0);var n=t%26,s=(t-n)/26;return y(0===this.negative,"imaskn works only with positive numbers"),this.length<=s?this:(0!==n&&s++,this.length=Math.min(s,this.length),0!==n&&(this.words[this.length-1]&=67108863^67108863>>>n<<n),this.strip())},d.prototype.maskn=function(t){return this.clone().imaskn(t)},d.prototype.iaddn=function(t){return y("number"==typeof t),y(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},d.prototype._iaddn=function(t){this.words[0]+=t;for(var n=0;n<this.length&&this.words[n]>=67108864;n++)this.words[n]-=67108864,n===this.length-1?this.words[n+1]=1:this.words[n+1]++;return this.length=Math.max(this.length,n+1),this},d.prototype.isubn=function(t){if(y("number"==typeof t),y(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var n=0;n<this.length&&this.words[n]<0;n++)this.words[n]+=67108864,this.words[n+1]-=1;return this.strip()},d.prototype.addn=function(t){return this.clone().iaddn(t)},d.prototype.subn=function(t){return this.clone().isubn(t)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(t,n,s){var u;this._expand(t.length+s);var l,p=0;for(u=0;u<t.length;u++){l=(0|this.words[u+s])+p;var h=(0|t.words[u])*n;p=((l-=67108863&h)>>26)-(h/67108864|0),this.words[u+s]=67108863&l}for(;u<this.length-s;u++)p=(l=(0|this.words[u+s])+p)>>26,this.words[u+s]=67108863&l;if(0===p)return this.strip();for(y(-1===p),p=0,u=0;u<this.length;u++)p=(l=-(0|this.words[u])+p)>>26,this.words[u]=67108863&l;return this.negative=1,this.strip()},d.prototype._wordDiv=function(t,n){var s,a=this.clone(),u=t,l=0|u.words[u.length-1];0!=(s=26-this._countBits(l))&&(u=u.ushln(s),a.iushln(s),l=0|u.words[u.length-1]);var e,h=a.length-u.length;if("mod"!==n){(e=new d(null)).length=h+1,e.words=new Array(e.length);for(var f=0;f<e.length;f++)e.words[f]=0}var b=a.clone()._ishlnsubmul(u,1,h);0===b.negative&&(a=b,e&&(e.words[h]=1));for(var x=h-1;x>=0;x--){var R=67108864*(0|a.words[u.length+x])+(0|a.words[u.length+x-1]);for(R=Math.min(R/l|0,67108863),a._ishlnsubmul(u,R,x);0!==a.negative;)R--,a.negative=0,a._ishlnsubmul(u,1,x),a.isZero()||(a.negative^=1);e&&(e.words[x]=R)}return e&&e.strip(),a.strip(),"div"!==n&&0!==s&&a.iushrn(s),{div:e||null,mod:a}},d.prototype.divmod=function(t,n,s){return y(!t.isZero()),this.isZero()?{div:new d(0),mod:new d(0)}:0!==this.negative&&0===t.negative?(l=this.neg().divmod(t,n),"mod"!==n&&(a=l.div.neg()),"div"!==n&&(u=l.mod.neg(),s&&0!==u.negative&&u.iadd(t)),{div:a,mod:u}):0===this.negative&&0!==t.negative?(l=this.divmod(t.neg(),n),"mod"!==n&&(a=l.div.neg()),{div:a,mod:l.mod}):0!=(this.negative&t.negative)?(l=this.neg().divmod(t.neg(),n),"div"!==n&&(u=l.mod.neg(),s&&0!==u.negative&&u.isub(t)),{div:l.div,mod:u}):t.length>this.length||this.cmp(t)<0?{div:new d(0),mod:this}:1===t.length?"div"===n?{div:this.divn(t.words[0]),mod:null}:"mod"===n?{div:null,mod:new d(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new d(this.modn(t.words[0]))}:this._wordDiv(t,n);var a,u,l},d.prototype.div=function(t){return this.divmod(t,"div",!1).div},d.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},d.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},d.prototype.divRound=function(t){var n=this.divmod(t);if(n.mod.isZero())return n.div;var s=0!==n.div.negative?n.mod.isub(t):n.mod,a=t.ushrn(1),u=t.andln(1),l=s.cmp(a);return l<0||1===u&&0===l?n.div:0!==n.div.negative?n.div.isubn(1):n.div.iaddn(1)},d.prototype.modn=function(t){y(t<=67108863);for(var n=(1<<26)%t,s=0,a=this.length-1;a>=0;a--)s=(n*s+(0|this.words[a]))%t;return s},d.prototype.idivn=function(t){y(t<=67108863);for(var n=0,s=this.length-1;s>=0;s--){var a=(0|this.words[s])+67108864*n;this.words[s]=a/t|0,n=a%t}return this.strip()},d.prototype.divn=function(t){return this.clone().idivn(t)},d.prototype.egcd=function(t){y(0===t.negative),y(!t.isZero());var n=this,s=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var a=new d(1),u=new d(0),l=new d(0),p=new d(1),h=0;n.isEven()&&s.isEven();)n.iushrn(1),s.iushrn(1),++h;for(var e=s.clone(),f=n.clone();!n.isZero();){for(var b=0,x=1;0==(n.words[0]&x)&&b<26;++b,x<<=1);if(b>0)for(n.iushrn(b);b-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(e),u.isub(f)),a.iushrn(1),u.iushrn(1);for(var R=0,I=1;0==(s.words[0]&I)&&R<26;++R,I<<=1);if(R>0)for(s.iushrn(R);R-- >0;)(l.isOdd()||p.isOdd())&&(l.iadd(e),p.isub(f)),l.iushrn(1),p.iushrn(1);n.cmp(s)>=0?(n.isub(s),a.isub(l),u.isub(p)):(s.isub(n),l.isub(a),p.isub(u))}return{a:l,b:p,gcd:s.iushln(h)}},d.prototype._invmp=function(t){y(0===t.negative),y(!t.isZero());var b,n=this,s=t.clone();n=0!==n.negative?n.umod(t):n.clone();for(var a=new d(1),u=new d(0),l=s.clone();n.cmpn(1)>0&&s.cmpn(1)>0;){for(var p=0,h=1;0==(n.words[0]&h)&&p<26;++p,h<<=1);if(p>0)for(n.iushrn(p);p-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var e=0,f=1;0==(s.words[0]&f)&&e<26;++e,f<<=1);if(e>0)for(s.iushrn(e);e-- >0;)u.isOdd()&&u.iadd(l),u.iushrn(1);n.cmp(s)>=0?(n.isub(s),a.isub(u)):(s.isub(n),u.isub(a))}return(b=0===n.cmpn(1)?a:u).cmpn(0)<0&&b.iadd(t),b},d.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var n=this.clone(),s=t.clone();n.negative=0,s.negative=0;for(var a=0;n.isEven()&&s.isEven();a++)n.iushrn(1),s.iushrn(1);for(;;){for(;n.isEven();)n.iushrn(1);for(;s.isEven();)s.iushrn(1);var u=n.cmp(s);if(u<0){var l=n;n=s,s=l}else if(0===u||0===s.cmpn(1))break;n.isub(s)}return s.iushln(a)},d.prototype.invm=function(t){return this.egcd(t).a.umod(t)},d.prototype.isEven=function(){return 0==(1&this.words[0])},d.prototype.isOdd=function(){return 1==(1&this.words[0])},d.prototype.andln=function(t){return this.words[0]&t},d.prototype.bincn=function(t){y("number"==typeof t);var n=t%26,s=(t-n)/26,a=1<<n;if(this.length<=s)return this._expand(s+1),this.words[s]|=a,this;for(var u=a,l=s;0!==u&&l<this.length;l++){var p=0|this.words[l];u=(p+=u)>>>26,this.words[l]=p&=67108863}return 0!==u&&(this.words[l]=u,this.length++),this},d.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},d.prototype.cmpn=function(t){var s,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)s=1;else{n&&(t=-t),y(t<=67108863,"Number is too big");var a=0|this.words[0];s=a===t?0:a<t?-1:1}return 0!==this.negative?0|-s:s},d.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var n=this.ucmp(t);return 0!==this.negative?0|-n:n},d.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var n=0,s=this.length-1;s>=0;s--){var a=0|this.words[s],u=0|t.words[s];if(a!==u){a<u?n=-1:a>u&&(n=1);break}}return n},d.prototype.gtn=function(t){return 1===this.cmpn(t)},d.prototype.gt=function(t){return 1===this.cmp(t)},d.prototype.gten=function(t){return this.cmpn(t)>=0},d.prototype.gte=function(t){return this.cmp(t)>=0},d.prototype.ltn=function(t){return-1===this.cmpn(t)},d.prototype.lt=function(t){return-1===this.cmp(t)},d.prototype.lten=function(t){return this.cmpn(t)<=0},d.prototype.lte=function(t){return this.cmp(t)<=0},d.prototype.eqn=function(t){return 0===this.cmpn(t)},d.prototype.eq=function(t){return 0===this.cmp(t)},d.red=function(t){return new j(t)},d.prototype.toRed=function(t){return y(!this.red,"Already a number in reduction context"),y(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},d.prototype.fromRed=function(){return y(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(t){return this.red=t,this},d.prototype.forceRed=function(t){return y(!this.red,"Already a number in reduction context"),this._forceRed(t)},d.prototype.redAdd=function(t){return y(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},d.prototype.redIAdd=function(t){return y(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},d.prototype.redSub=function(t){return y(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},d.prototype.redISub=function(t){return y(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},d.prototype.redShl=function(t){return y(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},d.prototype.redMul=function(t){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},d.prototype.redIMul=function(t){return y(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},d.prototype.redSqr=function(){return y(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return y(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return y(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return y(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return y(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(t){return y(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var S={k256:null,p224:null,p192:null,p25519:null};function M(c,t){this.name=c,this.p=new d(t,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function T(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function N(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function Mt(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function j(c){if("string"==typeof c){var t=d._prime(c);this.m=t.p,this.prime=t}else y(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}function Ot(c){j.call(this,c),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var t=new d(null);return t.words=new Array(Math.ceil(this.n/13)),t},M.prototype.ireduce=function(t){var s,n=t;do{this.split(n,this.tmp),s=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(s>this.n);var a=s<this.n?-1:n.ucmp(this.p);return 0===a?(n.words[0]=0,n.length=1):a>0?n.isub(this.p):n.strip(),n},M.prototype.split=function(t,n){t.iushrn(this.n,0,n)},M.prototype.imulK=function(t){return t.imul(this.k)},C(T,M),T.prototype.split=function(t,n){for(var s=4194303,a=Math.min(t.length,9),u=0;u<a;u++)n.words[u]=t.words[u];if(n.length=a,t.length<=9)return t.words[0]=0,void(t.length=1);var l=t.words[9];for(n.words[n.length++]=l&s,u=10;u<t.length;u++){var p=0|t.words[u];t.words[u-10]=(p&s)<<4|l>>>22,l=p}t.words[u-10]=l>>>=22,t.length-=0===l&&t.length>10?10:9},T.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var n=0,s=0;s<t.length;s++){var a=0|t.words[s];t.words[s]=67108863&(n+=977*a),n=64*a+(n/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},C(N,M),C(k,M),C(Mt,M),Mt.prototype.imulK=function(t){for(var n=0,s=0;s<t.length;s++){var a=19*(0|t.words[s])+n,u=67108863&a;a>>>=26,t.words[s]=u,n=a}return 0!==n&&(t.words[t.length++]=n),t},d._prime=function(t){if(S[t])return S[t];var n;if("k256"===t)n=new T;else if("p224"===t)n=new N;else if("p192"===t)n=new k;else{if("p25519"!==t)throw new Error("Unknown prime "+t);n=new Mt}return S[t]=n,n},j.prototype._verify1=function(t){y(0===t.negative,"red works only with positives"),y(t.red,"red works only with red numbers")},j.prototype._verify2=function(t,n){y(0==(t.negative|n.negative),"red works only with positives"),y(t.red&&t.red===n.red,"red works only with red numbers")},j.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},j.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},j.prototype.add=function(t,n){this._verify2(t,n);var s=t.add(n);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},j.prototype.iadd=function(t,n){this._verify2(t,n);var s=t.iadd(n);return s.cmp(this.m)>=0&&s.isub(this.m),s},j.prototype.sub=function(t,n){this._verify2(t,n);var s=t.sub(n);return s.cmpn(0)<0&&s.iadd(this.m),s._forceRed(this)},j.prototype.isub=function(t,n){this._verify2(t,n);var s=t.isub(n);return s.cmpn(0)<0&&s.iadd(this.m),s},j.prototype.shl=function(t,n){return this._verify1(t),this.imod(t.ushln(n))},j.prototype.imul=function(t,n){return this._verify2(t,n),this.imod(t.imul(n))},j.prototype.mul=function(t,n){return this._verify2(t,n),this.imod(t.mul(n))},j.prototype.isqr=function(t){return this.imul(t,t.clone())},j.prototype.sqr=function(t){return this.mul(t,t)},j.prototype.sqrt=function(t){if(t.isZero())return t.clone();var n=this.m.andln(3);if(y(n%2==1),3===n){var s=this.m.add(new d(1)).iushrn(2);return this.pow(t,s)}for(var a=this.m.subn(1),u=0;!a.isZero()&&0===a.andln(1);)u++,a.iushrn(1);y(!a.isZero());var l=new d(1).toRed(this),p=l.redNeg(),h=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new d(2*e*e).toRed(this);0!==this.pow(e,h).cmp(p);)e.redIAdd(p);for(var f=this.pow(e,a),b=this.pow(t,a.addn(1).iushrn(1)),x=this.pow(t,a),R=u;0!==x.cmp(l);){for(var I=x,A=0;0!==I.cmp(l);A++)I=I.redSqr();y(A<R);var U=this.pow(f,new d(1).iushln(R-A-1));b=b.redMul(U),f=U.redSqr(),x=x.redMul(f),R=A}return b},j.prototype.invm=function(t){var n=t._invmp(this.m);return 0!==n.negative?(n.negative=0,this.imod(n).redNeg()):this.imod(n)},j.prototype.pow=function(t,n){if(n.isZero())return new d(1).toRed(this);if(0===n.cmpn(1))return t.clone();var a=new Array(16);a[0]=new d(1).toRed(this),a[1]=t;for(var u=2;u<a.length;u++)a[u]=this.mul(a[u-1],t);var l=a[0],p=0,h=0,e=n.bitLength()%26;for(0===e&&(e=26),u=n.length-1;u>=0;u--){for(var f=n.words[u],b=e-1;b>=0;b--){var x=f>>b&1;l!==a[0]&&(l=this.sqr(l)),0!==x||0!==p?(p<<=1,p|=x,(4==++h||0===u&&0===b)&&(l=this.mul(l,a[p]),h=0,p=0)):h=0}e=26}return l},j.prototype.convertTo=function(t){var n=t.umod(this.m);return n===t?n.clone():n},j.prototype.convertFrom=function(t){var n=t.clone();return n.red=null,n},d.mont=function(t){return new Ot(t)},C(Ot,j),Ot.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},Ot.prototype.convertFrom=function(t){var n=this.imod(t.mul(this.rinv));return n.red=null,n},Ot.prototype.imul=function(t,n){if(t.isZero()||n.isZero())return t.words[0]=0,t.length=1,t;var s=t.imul(n),a=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=s.isub(a).iushrn(this.shift),l=u;return u.cmp(this.m)>=0?l=u.isub(this.m):u.cmpn(0)<0&&(l=u.iadd(this.m)),l._forceRed(this)},Ot.prototype.mul=function(t,n){if(t.isZero()||n.isZero())return new d(0)._forceRed(this);var s=t.mul(n),a=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=s.isub(a).iushrn(this.shift),l=u;return u.cmp(this.m)>=0?l=u.isub(this.m):u.cmpn(0)<0&&(l=u.iadd(this.m)),l._forceRed(this)},Ot.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Rt=L.nmd(Rt),this)},16658:Rt=>{Rt.exports=xt,xt.strict=E,xt.loose=y;var St=Object.prototype.toString,L={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function xt(C){return E(C)||y(C)}function E(C){return C instanceof Int8Array||C instanceof Int16Array||C instanceof Int32Array||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Uint16Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array}function y(C){return L[St.call(C)]}},45703:(Rt,St,L)=>{"use strict";const xt=L(82915),E=L(65361),y=L(95967);function Ht(v){if("string"!=typeof v||1!==v.length)throw new TypeError("arrayFormatSeparator must be single character string")}function Q(v,_){return _.encode?_.strict?xt(v):encodeURIComponent(v):v}function Tt(v,_){return _.decode?E(v):v}function jt(v){return Array.isArray(v)?v.sort():"object"==typeof v?jt(Object.keys(v)).sort((_,S)=>Number(_)-Number(S)).map(_=>v[_]):v}function Pt(v){const _=v.indexOf("#");return-1!==_&&(v=v.slice(0,_)),v}function It(v){const _=(v=Pt(v)).indexOf("?");return-1===_?"":v.slice(_+1)}function kt(v,_){return _.parseNumbers&&!Number.isNaN(Number(v))&&"string"==typeof v&&""!==v.trim()?v=Number(v):_.parseBooleans&&null!==v&&("true"===v.toLowerCase()||"false"===v.toLowerCase())&&(v="true"===v.toLowerCase()),v}function Zt(v,_){Ht((_=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},_)).arrayFormatSeparator);const S=function(v){let _;switch(v.arrayFormat){case"index":return(S,M,T)=>{_=/\[(\d*)\]$/.exec(S),S=S.replace(/\[\d*\]$/,""),_?(void 0===T[S]&&(T[S]={}),T[S][_[1]]=M):T[S]=M};case"bracket":return(S,M,T)=>{_=/(\[\])$/.exec(S),T[S=S.replace(/\[\]$/,"")]=_?void 0!==T[S]?[].concat(T[S],M):[M]:M};case"comma":case"separator":return(S,M,T)=>{const k="string"==typeof M&&M.split("").indexOf(v.arrayFormatSeparator)>-1?M.split(v.arrayFormatSeparator).map(Mt=>Tt(Mt,v)):null===M?M:Tt(M,v);T[S]=k};default:return(S,M,T)=>{T[S]=void 0!==T[S]?[].concat(T[S],M):M}}}(_),M=Object.create(null);if("string"!=typeof v||!(v=v.trim().replace(/^[?#&]/,"")))return M;for(const T of v.split("&")){let[N,k]=y(_.decode?T.replace(/\+/g," "):T,"=");k=void 0===k?null:["comma","separator"].includes(_.arrayFormat)?k:Tt(k,_),S(Tt(N,_),k,M)}for(const T of Object.keys(M)){const N=M[T];if("object"==typeof N&&null!==N)for(const k of Object.keys(N))N[k]=kt(N[k],_);else M[T]=kt(N,_)}return!1===_.sort?M:(!0===_.sort?Object.keys(M).sort():Object.keys(M).sort(_.sort)).reduce((T,N)=>{const k=M[N];return T[N]=Boolean(k)&&"object"==typeof k&&!Array.isArray(k)?jt(k):k,T},Object.create(null))}St.extract=It,St.parse=Zt,St.stringify=(v,_)=>{if(!v)return"";Ht((_=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},_)).arrayFormatSeparator);const S=k=>_.skipNull&&(v=>null==v)(v[k])||_.skipEmptyString&&""===v[k],M=function(v){switch(v.arrayFormat){case"index":return _=>(S,M)=>{const T=S.length;return void 0===M||v.skipNull&&null===M||v.skipEmptyString&&""===M?S:null===M?[...S,[Q(_,v),"[",T,"]"].join("")]:[...S,[Q(_,v),"[",Q(T,v),"]=",Q(M,v)].join("")]};case"bracket":return _=>(S,M)=>void 0===M||v.skipNull&&null===M||v.skipEmptyString&&""===M?S:null===M?[...S,[Q(_,v),"[]"].join("")]:[...S,[Q(_,v),"[]=",Q(M,v)].join("")];case"comma":case"separator":return _=>(S,M)=>null==M||0===M.length?S:0===S.length?[[Q(_,v),"=",Q(M,v)].join("")]:[[S,Q(M,v)].join(v.arrayFormatSeparator)];default:return _=>(S,M)=>void 0===M||v.skipNull&&null===M||v.skipEmptyString&&""===M?S:null===M?[...S,Q(_,v)]:[...S,[Q(_,v),"=",Q(M,v)].join("")]}}(_),T={};for(const k of Object.keys(v))S(k)||(T[k]=v[k]);const N=Object.keys(T);return!1!==_.sort&&N.sort(_.sort),N.map(k=>{const Mt=v[k];return void 0===Mt?"":null===Mt?Q(k,_):Array.isArray(Mt)?Mt.reduce(M(k),[]).join("&"):Q(k,_)+"="+Q(Mt,_)}).filter(k=>k.length>0).join("&")},St.parseUrl=(v,_)=>{_=Object.assign({decode:!0},_);const[S,M]=y(v,"#");return Object.assign({url:S.split("?")[0]||"",query:Zt(It(v),_)},_&&_.parseFragmentIdentifier&&M?{fragmentIdentifier:Tt(M,_)}:{})},St.stringifyUrl=(v,_)=>{_=Object.assign({encode:!0,strict:!0},_);const S=Pt(v.url).split("?")[0]||"",M=St.extract(v.url),T=St.parse(M,{sort:!1}),N=Object.assign(T,v.query);let k=St.stringify(N,_);k&&(k=`?${k}`);let Mt=function(v){let _="";const S=v.indexOf("#");return-1!==S&&(_=v.slice(S)),_}(v.url);return v.fragmentIdentifier&&(Mt=`#${Q(v.fragmentIdentifier,_)}`),`${S}${k}${Mt}`}},15343:(Rt,St,L)=>{var xt=L(16658).strict;Rt.exports=function(y){if(xt(y)){var C=Buffer.from(y.buffer);return y.byteLength!==y.buffer.byteLength&&(C=C.slice(y.byteOffset,y.byteOffset+y.byteLength)),C}return Buffer.from(y)}},36563:()=>{}}]);